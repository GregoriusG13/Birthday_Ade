
<!DOCTYPE html>
<html lang="id">
<head>
<base href="/Birthday_Ade/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romantic Quiz Cinematic Ultimate</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body onload="initApp()">
    <div id="loading">Loading... üíñ</div>

    <div class="wrapper hidden" id="authPage">
        <div class="screen animate-pop">
            <h1>Selamat Datang!</h1>
            <input type="text" id="nama" placeholder="Masukkan Nama">
            <input type="date" id="tanggal">
            <button onclick="login()">Masuk</button>
        </div>
    </div>

    <div class="wrapper hidden" id="menuPage">
        <div class="screen animate-pop">
            <h1>Hai <span id="user-name"></span>!</h1>
            <button onclick="startQuiz()">Play</button>
        </div>
    </div>

    <div class="wrapper hidden" id="quizPage">
        <div class="screen animate-pop" id="quizCard">
            <h3 id="alertBox" style="color: red;"></h3>
            <h1 id="question"></h1>
            <div id="answer"></div>
        </div>
        <div id="cutsceneBox" class="hidden"><div class="cutscene-card" id="cutsceneText"></div></div>
    </div>

    <div class="wrapper hidden birthday" id="birthdayPage">
        <div class="screen animate-pop">
            <h1 class="romantic-title">Selamat Ulang Tahun Sayang! üéâüéÇ</h1>
            <p class="romantic-subtitle">Semoga selalu bahagia, sehat, sukses, dan selalu bersama Mas Gilang selamanya ‚ù§Ô∏è</p>
            <div class="gallery">
                <img src="./assets/2.jpg" alt="Ade">
            </div>
            <p class="romantic-quote">"My heart is perfect because you are inside." ~ Mas Gilang</p>
        </div>
    </div>

    <audio id="backgroundMusic" preload="auto" loop>
        <source src="./assets/HAPPY_BIRTHDAY_TO_YOU.mp3" type="audio/mpeg">
    </audio>

    <script>
    let questions = [
        {
            question: "Siapa nama pacarmu?",
            type: "text",
            validate: (ans) => ans.trim().toLowerCase() === "gregorius gilang threesulistianto"
        },
        {
            question: "Tanggal lahir pacarmu kapan?",
            type: "text",
            validate: (ans) => ans.trim().toLowerCase() === "13 mei 1998"
        },
        {
            question: "Apakah kamu mencintai Mas Gilang?",
            type: "multiple",
            options: [
                "Yaa üòä",
                "Yaaaaaaa üòò",
                "YAAAAAA!!! ‚ù§Ô∏è"
            ],
            validate: () => true
        },
        {
            question: "Kira kira kamu bisa nebak ga kadonya apa? kalo bener nanti aku jawab ya kalo salah aku jawab engga",
            type: "textarea",
            validate: () => true
        },
        {
            question: "Apakah kamu siap lanjut ke surprise berikutnya?",
            type: "multiple",
            options: ["Ya", "Tidak"],
            validate: () => true
        }
    ];

    let current = 0;

    function initApp() {
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('authPage').classList.remove('hidden');
            generateLoveRain();
        }, 1000);
    }

    function login() {
        const nama = document.getElementById('nama').value.trim();
        const tanggal = document.getElementById('tanggal').value;
        if (nama === '' || tanggal === '') {
            alert('Isi semua data terlebih dahulu!');
            return;
        }
        if (tanggal !== '2023-08-28') {
            alert('Tanggal yang kamu masukkan salah sayang üòò');
            return;
        }
        document.getElementById("user-name").innerText = nama;
        showPage('menuPage');
    }

    function startQuiz() {
        current = 0;
        showPage('quizPage');
        loadQuestion();
    }

    function loadQuestion() {
        document.getElementById("alertBox").innerText = "";
        document.getElementById("cutsceneBox").classList.add("hidden");
        document.getElementById("quizCard").classList.remove("hidden");

        if (current === 2) {
            showCutscene("üéâ You Almost There!!! üéâ", () => {
                renderQuestion();
            });
            return;
        }

        if (current === 3) {
            const answerEl = document.getElementById("answer");
            document.getElementById("question").innerText = questions[current].question;
            answerEl.innerHTML = "";
            const input = document.createElement("textarea");
            input.id = "userInput";
            input.rows = 4;
            input.cols = 40;
            answerEl.appendChild(input);
            const btn = document.createElement("button");
            btn.innerText = "Next";
            btn.onclick = () => {
                showCutscene("CIELAH NUNGGUIN BANGET JAWABANYA YA? EHE NAMANYA JUGA HADIAH YA RAHASIA SAYANG HUHUY LOVE LOVE ‚ù§Ô∏è", () => {
                    current++;
                    loadQuestion();
                });
            };
            answerEl.appendChild(btn);
            return;
        }

        renderQuestion();
    }

    function renderQuestion(){
        const q = questions[current];
        document.getElementById("question").innerText = q.question;
        const answerEl = document.getElementById("answer");
        answerEl.innerHTML = "";

        if (q.type === "text") {
            const input = document.createElement("input");
            input.type = "text";
            input.id = "userInput";
            answerEl.appendChild(input);
            const btn = document.createElement("button");
            btn.innerText = "Next";
            btn.onclick = validateAnswer;
            answerEl.appendChild(btn);
        } else if (q.type === "multiple") {
            q.options.forEach(opt => {
                const btn = document.createElement("button");
                btn.innerText = opt;
                btn.onclick = () => validateAnswer(opt);
                answerEl.appendChild(btn);
            });
        }
    }

    function validateAnswer(selected=null) {
        const q = questions[current];
        let ans = selected;
        if (q.type === "text") {
            ans = document.getElementById("userInput").value;
        }
        if (q.validate(ans)) {
            if(current === 4){
                if(ans === "Tidak"){
                    alert("Ga boleh jawab tidak ya sayangku ‚ù§Ô∏è");
                    questions[4].options = ["Ya", "IYA!!!"];
                    loadQuestion();
                    return;
                }
            }
            current++;
            if (current >= questions.length){
                const audio = document.getElementById("backgroundMusic");
                audio.currentTime = 37.8;
                setTimeout(() => audio.play(), 50);
                showPage("birthdayPage");
            } else {
                loadQuestion();
            }
        } else {
            alert("Hmm... kayaknya masih kurang tepat sayang üòò coba lagi yaa");
        }
    }

    function showCutscene(text, callback){
        document.getElementById("quizCard").classList.add("hidden");
        document.getElementById("cutsceneText").innerText = text;
        document.getElementById("cutsceneBox").classList.remove("hidden");
        setTimeout(() => {
            document.getElementById("cutsceneBox").classList.add("hidden");
            document.getElementById("quizCard").classList.remove("hidden");
            callback();
        }, 5000);
    }

    function showPage(id){
        document.querySelectorAll('.wrapper').forEach(w => w.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function generateLoveRain(){
        for (let i = 0; i < 30; i++){
            let love = document.createElement('div');
            love.innerHTML = '‚ù§Ô∏è';
            love.classList.add('love');
            love.style.left = Math.random() * 100 + 'vw';
            love.style.animationDuration = (Math.random()*3 + 3) + 's';
            love.style.zIndex = '0';
            document.body.appendChild(love);
        }
    }
    </script>

</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
function fireConfetti(){
    var duration = 8000;
    const confettiCanvas = document.createElement('canvas');
    confettiCanvas.style.position = 'fixed';
    confettiCanvas.style.top = '0';
    confettiCanvas.style.left = '0';
    confettiCanvas.style.width = '100%';
    confettiCanvas.style.height = '100%';
    confettiCanvas.style.zIndex = '9999';
    confettiCanvas.style.pointerEvents = 'none';
    confettiCanvas.id = 'confettiCanvas';
    document.body.appendChild(confettiCanvas);

    const myConfetti = confetti.create(confettiCanvas, { resize: true, useWorker: true });

    var end = Date.now() + duration;

    (function frame() {
        myConfetti({
            particleCount: 4,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: ['#ff3366', '#ff6699', '#ff99cc']
        });
        myConfetti({
            particleCount: 4,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: ['#ff3366', '#ff6699', '#ff99cc']
        });

        if (Date.now() < end) {
            requestAnimationFrame(frame);
        }
    })();
}

const originalShowPage = showPage;
showPage = function(id){
    originalShowPage(id);
    if(id === 'birthdayPage'){
        fireConfetti();
    }
}
</script>
